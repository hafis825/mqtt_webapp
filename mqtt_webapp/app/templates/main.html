{% extends "base.html" %}
{% block content %}
<div class="container">
    <div class="status-bar">
        <span id="connection-status" class="connected">‚óè Connected</span>
    </div>

    <div class="section">
        <h2>Subscribe to Topic</h2>
        <div class="subscribe-form">
            <input type="text" id="subscribe-topic" list="common-topics">
            <datalist id="common-topics">
                <option value="iotapp/sensors/#">
                <option value="iotapp/controls/#">
                <option value="iotapp/alerts/#">
                <option value="iotapp/status/#">
            </datalist>
            <button onclick="subscribeTopic()">Subscribe</button>
        </div>
    </div>

    <div class="section">
        <h2>Subscribed Topics</h2>
        <div class="topics-list">
            <select id="topics" size="4" multiple></select>
            <button onclick="unsubscribeTopic()">Unsubscribe</button>
        </div>
    </div>

    <div class="section">
        <h2>Received Messages</h2>
        <div class="messages">
            <div id="received-messages"></div>
            <button onclick="clearMessages()">Clear Messages</button>
        </div>
    </div>

    <div class="section">
        <h2>Publish Message</h2>
        <div class="publish-form">
            <div class="form-group">
                <label>Topic:</label>
                <input type="text" id="publish-topic" list="common-topics">
            </div>
            <div class="form-group">
                <label>Message:</label>
                <input type="text" id="publish-message">
            </div>
            <div class="button-group">
                <button onclick="publishMessage()">Publish</button>
                <button onclick="disconnect()">Disconnect</button>
            </div>
        </div>
    </div>
</div>
{% endblock %}